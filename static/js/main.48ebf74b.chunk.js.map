{"version":3,"sources":["core/ProfileContext.tsx","resume/profile/Profile.tsx","shared/components/tile/Tile.tsx","shared/utils/getMonthName.ts","resume/education/Education.tsx","shared/components/markdown-content/markdown-content.tsx","resume/experience/Experience.tsx","resume/Resume.tsx","firebase/firebase.ts","firebase/context.tsx","core/ProfileService.ts","shared/utils/randomWaitTime.ts","loading/Loader.tsx","footer/Footer.tsx","App.tsx","serviceWorker.ts","index.tsx","logo.svg"],"names":["ProfileContext","React","createContext","Profile","profile","className","src","logo","alt","name","career","contact","phone","href","email","Tile","title","children","classes","monthNames","EducationItem","education","endDate","toDate","month","getMonth","year","getFullYear","degree","school","Education","useState","showMore","setShowMore","latestEducation","formerEducation","length","role","onClick","map","index","key","MarkdownContent","content","source","replace","escapeHtml","Experience","experience","css","company","position","pride","RecentExperience","recentExperience","AdditionalExperience","additionalExperience","shift","Resume","Consumer","about","techStack","softSkills","articles","article","target","rel","text","firebaseConfig","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","Firebase","db","app","initializeApp","this","firestore","FirebaseContext","randomWaitTime","maxTime","Math","ceil","random","randomWaitTimeFactory","fromSnapToData","snapshot","data","fromSnapsToData","snapshots","docs","doc","ProfileService","firebase","collection","queryRef","from","get","pipe","take","shareReplay","Observable","subscriber","profile$","delay","concatMap","next","loading","loadingStatus","experience$","education$","articles$","catchError","of","subscribe","complete","profileRef","experienceRefs$","collection$","orderBy","getCollection","educationRefs$","articlesRefs$","defaultText","Loader","Footer","App","profileService","state","context","fetchProfile","takeWhile","setState","Provider","value","Component","contextType","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message","module","exports"],"mappings":"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","file":"static/js/main.48ebf74b.chunk.js","sourcesContent":["import React from 'react';\n\nexport const ProfileContext = React.createContext(null);\n","import React from 'react';\nimport { ProfileProps } from '../../core/ProfileModel';\nimport logo from '../../logo.svg';\nimport './Profile.scss';\n\nexport function Profile({ profile }: ProfileProps) {\n  return (\n    <section className=\"section profile\">\n      <article className=\"media\">\n        <figure className=\"media-left\">\n          <p className=\"image is-128x128\">\n            <img src={logo} alt=\"logo\" />\n          </p>\n        </figure>\n        <div className=\"media-content\">\n          <div className=\"content\">\n            <h1 className=\"title\">\n              <strong>{profile.name}</strong>\n            </h1>\n            <h2 className=\"subtitle\">{profile.career}</h2>\n          </div>\n          <div className=\"content is-small\">\n            <p>\n              <small>{profile.contact.phone}</small>\n            </p>\n            <p>\n              <small>\n                <a href=\"mailto:someone@yoursite.com\">{profile.contact.email}</a>\n              </small>\n            </p>\n          </div>\n        </div>\n      </article>\n    </section>\n  );\n}\n","import React from 'react';\nimport './Tile.scss';\nexport function Tile({ title = null, className = '', children }) {\n  const classes = className ? `tile ${className}` : 'tile';\n  return (\n    <div className={classes}>\n      {title ? <p className=\"title\">{title}</p> : ''}\n      {children}\n    </div>\n  );\n}\n","const monthNames = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December',\n];\n\nexport function getMonth(month: number) {\n  return month >= 0 && month <= 11 ? monthNames[month] : '';\n}\n","import React, { useState } from 'react';\n\nimport { ProfileProps, Education as EducationModel } from '../../core/ProfileModel';\nimport { getMonth } from '../../shared/utils/getMonthName';\n\nfunction EducationItem({ education }: { education: EducationModel }) {\n  const endDate = education.endDate.toDate();\n  const month = getMonth(endDate.getMonth());\n  const year = endDate.getFullYear();\n  return (\n    <div className=\"education\">\n      <p className=\"subtitle\">\n        <strong>{education.degree}</strong>\n      </p>\n      <p className=\"subtitle\">{education.school}</p>\n      <p>\n        {month}, {year}\n      </p>\n    </div>\n  );\n}\n\nexport function Education({ profile }: ProfileProps) {\n  const [showMore, setShowMore] = useState(false);\n\n  const [latestEducation, ...formerEducation] = profile.education;\n  return (\n    <div className=\"content\">\n      <EducationItem education={latestEducation} />\n\n      {formerEducation && formerEducation.length ? (\n        <div className=\"content\">\n          <p className=\"no-print\">\n            <small>\n              <a role=\"button\" href=\"#\" onClick={() => setShowMore(!showMore)}>\n                {showMore ? 'Show less...' : 'Show more...'}\n              </a>\n            </small>\n          </p>\n          {showMore\n            ? formerEducation.map((education, index) => <EducationItem key={index} education={education} />)\n            : ''}\n        </div>\n      ) : (\n        ''\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\n\nexport function MarkdownContent({ content }: { content: string }) {\n  return (\n    <div className=\"markdown\">\n      <ReactMarkdown source={content.replace(/\\\\n/gi, '\\n')} escapeHtml={false} />\n    </div>\n  );\n}\n","import React from 'react';\nimport { ProfileProps, Experience as ExperienceModel } from '../../core/ProfileModel';\nimport { MarkdownContent } from '../../shared/components/markdown-content/markdown-content';\n\nimport './Experience.scss';\n\nfunction Experience({ experience, className = '' }: { experience: ExperienceModel; className?: string }) {\n  const css = `experience ${className}`;\n  return (\n    <div className={css}>\n      <p className=\"subtitle\">\n        <strong>{experience.company}</strong>\n      </p>\n      <p className=\"subtitle\">{experience.position}</p>\n      <MarkdownContent content={experience.pride} />\n    </div>\n  );\n}\n\nexport function RecentExperience({ profile }: ProfileProps) {\n  const [recentExperience] = profile.experience;\n  return <Experience experience={recentExperience} />;\n}\n\nexport function AdditionalExperience({ profile }: ProfileProps) {\n  const additionalExperience = [...profile.experience];\n  additionalExperience.shift();\n  return (\n    <div>\n      {additionalExperience.map((experience, index) => {\n        return <Experience key={index} className=\"additional-experience\" experience={experience} />;\n      })}\n    </div>\n  );\n}\n","import React from 'react';\nimport { ProfileContext } from '../core/ProfileContext';\nimport { Profile } from './profile/Profile';\nimport { ProfileModel } from '../core/ProfileModel';\nimport { Tile } from '../shared/components';\nimport { Education } from './education/Education';\nimport { RecentExperience, AdditionalExperience } from './experience/Experience';\n\nimport ReactMarkdown from 'react-markdown';\nimport { MarkdownContent } from '../shared/components/markdown-content/markdown-content';\n\n// import markdownText from './__mocks__/markdownText';\n\nexport function Resume() {\n  return (\n    <ProfileContext.Consumer>\n      {(profile: ProfileModel) => {\n        return (\n          <div>\n            <Profile profile={profile}></Profile>\n            <section className=\"section no-padding-top\">\n              <div className=\"columns\">\n                <div className=\"column\">\n                  <Tile className=\"is-parent\">\n                    <Tile title=\"About\" className=\"is-child\">\n                      <div>{profile.about}</div>\n                    </Tile>\n                  </Tile>\n                  <Tile className=\"is-parent\">\n                    <Tile title=\"languages & technologies\" className=\"is-child\">\n                      <div className=\"markdown\">\n                        <ReactMarkdown source={profile.techStack.replace(/\\\\n/gi, '\\n')} escapeHtml={false} />\n                      </div>\n                    </Tile>\n                  </Tile>\n                  <Tile className=\"is-parent\">\n                    <Tile title=\"Other skills\" className=\"is-child\">\n                      <MarkdownContent content={profile.softSkills} />\n                    </Tile>\n                  </Tile>\n                </div>\n                <div className=\"column\">\n                  <Tile className=\"is-parent\">\n                    <Tile title=\"Education\" className=\"is-child\">\n                      <Education profile={profile} />\n                    </Tile>\n                  </Tile>\n                  <Tile className=\"is-parent\">\n                    <Tile title=\"current work\" className=\"is-child\">\n                      <RecentExperience profile={profile} />\n                    </Tile>\n                  </Tile>\n                  <Tile className=\"is-parent\">\n                    <Tile title=\"Articles & portfolio\" className=\"is-child markdown\">\n                      <ul>\n                        {profile.articles.map((article, index) => {\n                          return (\n                            <li key={index}>\n                              <a target=\"_blank\" rel=\"noopener noreferrer\" href={article.source}>\n                                {article.text}\n                              </a>\n                            </li>\n                          );\n                        })}\n                      </ul>\n                    </Tile>\n                  </Tile>\n                </div>\n              </div>\n              <div className=\"columns\">\n                <div className=\"column\">\n                  <Tile className=\"is-parent\">\n                    <Tile title=\"Additional experience\" className=\"is-child\">\n                      <AdditionalExperience profile={profile} />\n                    </Tile>\n                  </Tile>\n                </div>\n              </div>\n            </section>\n          </div>\n        );\n      }}\n    </ProfileContext.Consumer>\n  );\n}\n","import app from 'firebase/app';\nimport 'firebase/database';\nimport 'firebase/firestore';\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n};\n\nexport class Firebase {\n  private db: firebase.firestore.Firestore;\n\n  constructor() {\n    app.initializeApp(firebaseConfig);\n    this.db = app.firestore();\n  }\n\n  public get firestore() {\n    return this.db;\n  }\n}\n","import React from 'react';\nimport { Firebase } from './firebase';\n\nconst FirebaseContext = React.createContext<Firebase>(new Firebase());\n\nexport default FirebaseContext;\n","import Firebase from '../firebase';\nimport { from, Observable, of } from 'rxjs';\nimport { map, shareReplay, take, concatMap, catchError, delay } from 'rxjs/operators';\nimport { ProfileModel, Education, Experience, Articles } from './ProfileModel';\nimport { randomWaitTimeFactory } from '../shared/utils/randomWaitTime';\nimport { loadChildRefs } from './loadChildRefs';\n\n// random wait time generator\nconst randomWaitTime = randomWaitTimeFactory(900);\n\nconst fromSnapToData = <T>(snapshot: firebase.firestore.DocumentSnapshot<firebase.firestore.DocumentData>) =>\n  snapshot.data() as T;\n\nconst fromSnapsToData = <T>(snapshots: firebase.firestore.QuerySnapshot<firebase.firestore.DocumentData>) =>\n  snapshots.docs.map(doc => fromSnapToData<T>(doc));\n\nexport class ProfileService {\n  constructor(private firebase: Firebase) {}\n\n  private collection$(name: string) {\n    return this.firebase.firestore.collection(name);\n  }\n\n  private getCollection(queryRef: firebase.firestore.Query<firebase.firestore.DocumentData>) {\n    return from(queryRef.get()).pipe(take(1), shareReplay());\n  }\n\n  private get profile$(): Observable<ProfileModel> {\n    const profileRef = this.firebase.firestore.collection('profile').doc('emsedano');\n    return from(profileRef.get()).pipe(take(1), map(fromSnapToData), shareReplay()) as Observable<ProfileModel>;\n  }\n\n  private get experience$(): Observable<Experience[]> {\n    const experienceRefs$ = this.collection$('experience').orderBy('startDate', 'desc');\n    return this.getCollection(experienceRefs$).pipe(map(snapshots => fromSnapsToData<Experience>(snapshots)));\n  }\n\n  private get education$(): Observable<Education[]> {\n    const educationRefs$ = this.collection$('education').orderBy('endDate', 'desc');\n    return this.getCollection(educationRefs$).pipe(map(snapshots => fromSnapsToData<Education>(snapshots)));\n  }\n\n  private get articles$(): Observable<Articles[]> {\n    const articlesRefs$ = this.collection$('articles');\n    return this.getCollection(articlesRefs$).pipe(map(snapshots => fromSnapsToData<Articles>(snapshots)));\n  }\n\n  fetchProfile(): Observable<{ loading: boolean; loadingStatus?: string; profile?: ProfileModel }> {\n    return new Observable(subscriber => {\n      this.profile$\n        .pipe(\n          take(1),\n          // fetch experience\n          delay(randomWaitTime()),\n          concatMap(profile => {\n            subscriber.next({ loading: true, loadingStatus: 'Fetching Experience' });\n            return this.experience$.pipe(map(experience => ({ ...profile, experience })));\n          }),\n          // fetch education\n          delay(randomWaitTime()),\n          concatMap(profile => {\n            subscriber.next({ loading: true, loadingStatus: 'Fetching Education' });\n            return this.education$.pipe(map(education => ({ ...profile, education })));\n          }),\n          // fetch articles\n          delay(randomWaitTime()),\n          concatMap(profile => {\n            subscriber.next({ loading: true, loadingStatus: 'Fetching Articles' });\n            return this.articles$.pipe(map(articles => ({ ...profile, articles })));\n          }),\n          delay(randomWaitTime()),\n          // finally return profile\n          map((profile: ProfileModel) => {\n            subscriber.next({ loading: false, profile });\n          }),\n          catchError(() => of({ loading: false, loadingStatus: 'Error' }))\n        )\n        .subscribe(() => subscriber.complete());\n    });\n  }\n}\n","export const randomWaitTimeFactory = (maxTime: number = 1000) => () => Math.ceil(Math.random() * maxTime);\n","import React from 'react';\nimport logo from '../logo.svg';\nimport './Loader.scss';\n\nconst defaultText = { text: 'Loading' };\n\nexport function Loader({ text }: { text: string } = defaultText) {\n  return (\n    <div className=\"Loader\">\n      <header className=\"Loader-header\">\n        <img src={logo} className=\"Loader-logo\" alt=\"logo\" />\n        <p>{text}</p>\n      </header>\n    </div>\n  );\n}\n","import React from 'react';\n\nexport function Footer() {\n  return (\n    <footer className=\"footer no-print\">\n      <div className=\"content has-text-centered is-small\">\n        <p>\n          By{' '}\n          <strong>\n            <a href=\"https://jgthms.com\">Elias Martinez</a>{' '}\n          </strong>{' '}\n          using <a href=\"https://es.reactjs.org/\">React</a>, <a href=\"https://firebase.google.com\">Firebase</a> {' & '}\n          <a href=\"https://bulma.io/\">Bulma</a>. All rights reserved May, 2020.\n        </p>\n      </div>\n    </footer>\n  );\n}\n","import React from 'react';\nimport { Resume } from './resume/Resume';\nimport { FirebaseContext } from './firebase';\nimport { ProfileService } from './core/ProfileService';\nimport { takeWhile } from 'rxjs/operators';\nimport { Loader } from './loading/Loader';\nimport { ProfileContext } from './core/ProfileContext';\nimport { Footer } from './footer/Footer';\n\nexport class App extends React.Component {\n  static contextType = FirebaseContext;\n  private profileService: ProfileService;\n\n  state = {\n    loading: true,\n    loadingStatus: 'Loading Profile',\n    profile: {},\n  };\n\n  componentDidMount() {\n    // to give experience of loading only\n    this.profileService = new ProfileService(this.context);\n\n    this.profileService\n      .fetchProfile()\n      .pipe(takeWhile(() => this.state.loading))\n      .subscribe(state => this.setState(state));\n  }\n\n  render() {\n    const { profile, loading, loadingStatus } = this.state;\n\n    const content = loading ? (\n      <Loader text={loadingStatus} />\n    ) : (\n      <ProfileContext.Provider value={profile}>\n        <Resume />\n      </ProfileContext.Provider>\n    );\n\n    return (\n      <div>\n        <div className=\"container\">{content}</div>\n        <Footer />\n      </div>\n    );\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport { App } from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/logo.59e410d6.svg\";"],"sourceRoot":""}